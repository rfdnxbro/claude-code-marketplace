{
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "作業完了前にドキュメントの整合性を確認してください。\n\n【確認対象】\n1. .claude/rules/README.md - 索引テーブルと実際のファイルが一致しているか\n2. /README.md - ディレクトリ構成やコマンド説明が実態と一致しているか\n3. CLAUDE.md - コマンドセクションや概要が最新か\n4. plugins/*/README.md - 今回変更したプラグインのREADMEが実態と一致しているか\n\n【判断基準】\n- 追加: 永続的で他の開発者にも有用なものだけ追加。一時的・実験的なものは不要\n- 削除: 存在しないファイルへの参照、古くなった情報は削除\n- 肥大化防止: 本当に必要な情報だけを残す\n- プラグインREADME: コマンド一覧やファイル構成が実際と一致しているか\n\n【アクション】\n- 問題がなければ何もせず完了\n- 問題があれば修正してから完了",
            "timeout": 120
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 ${CLAUDE_PROJECT_DIR}/scripts/validate_plugin.py",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "cd ${CLAUDE_PROJECT_DIR} && [[ ${CLAUDE_FILE_PATH} == *.py ]] && uvx ruff check --fix --quiet ${CLAUDE_FILE_PATH} && uvx ruff format --quiet ${CLAUDE_FILE_PATH} || true",
            "timeout": 15
          }
        ]
      }
    ]
  }
}
