{
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "作業完了前にドキュメントの整合性を確認してください。\n\n【確認対象】\n1. .claude/rules/README.md - 索引テーブルと実際のファイルが一致しているか\n2. /README.md - ディレクトリ構成やコマンド説明が実態と一致しているか\n3. CLAUDE.md - コマンドセクションや概要が最新か\n4. plugins/*/README.md - 今回変更したプラグインのREADMEが実態と一致しているか\n\n【判断基準】\n- 追加: 永続的で他の開発者にも有用なものだけ追加。一時的・実験的なものは不要\n- 削除: 存在しないファイルへの参照、古くなった情報は削除\n- 肥大化防止: 本当に必要な情報だけを残す\n- プラグインREADME: コマンド一覧やファイル構成が実際と一致しているか\n\n【アクション】\n問題がない場合: 何もせず完了\n\n問題がある場合: AskUserQuestionツールで以下の選択肢を提示\n- A: 今すぐ修正する（推奨）\n- B: 後で手動修正する（問題点を一覧表示して完了）\n- C: 無視して完了（意図的なスキップ）\n\nユーザーがAを選択した場合のみ修正を実行。BまたはCの場合は修正せず完了。",
            "timeout": 120
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 ${CLAUDE_PROJECT_DIR}/scripts/validate_plugin.py",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "cd ${CLAUDE_PROJECT_DIR} && [[ ${CLAUDE_FILE_PATH} == *.py ]] && uvx ruff check --fix --quiet ${CLAUDE_FILE_PATH} && uvx ruff format --quiet ${CLAUDE_FILE_PATH} || true",
            "timeout": 15
          }
        ]
      }
    ]
  }
}
